<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DonJu Gourmet ‚Äî Pedidos</title>
  <meta name="description" content="DonJu Gourmet: postres 180 ml por encargo. Cierre 18:00, entrega al d√≠a siguiente. La Florida, Macul, Pe√±alol√©n, Puente Alto, La Granja." />
  <meta name="theme-color" content="#fbf7f2" />

  <!-- Open Graph -->
  <meta property="og:title" content="DonJu Gourmet ‚Äî Pedidos por WhatsApp" />
  <meta property="og:description" content="Postres 180 ml ¬∑ Cierre 18:00 ¬∑ Entrega al d√≠a siguiente ¬∑ La Florida y alrededores" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://juliohernandezm40-creator.github.io/donju-gourmet/" />
  <meta property="og:image" content="https://juliohernandezm40-creator.github.io/donju-gourmet/logo.jpg" />

  <link rel="icon" href="logo.jpg">

  <style>
    :root{
      --bg:#fbf7f2;
      --stroke:rgba(40,20,10,.10);
      --stroke2:rgba(40,20,10,.16);
      --text:#1b1411;
      --muted:rgba(27,20,17,.68);
      --accent:#7a4d2a;
      --shadow: 0 18px 45px rgba(30,15,10,.18);
      --r2:22px;
      --max:1020px;

      --gold1: rgba(215,180,106,.55);
      --gold2: rgba(215,180,106,.18);
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:
        radial-gradient(1200px 800px at 10% 0%, rgba(42,166,161,.12) 0%, transparent 60%),
        radial-gradient(1000px 700px at 90% 10%, rgba(122,77,42,.10) 0%, transparent 62%),
        radial-gradient(900px 600px at 40% 110%, rgba(255,120,160,.10) 0%, transparent 55%),
        var(--bg);
      color:var(--text);
    }
    a{color:inherit}
    .wrap{max-width:var(--max); margin:0 auto; padding:22px}

    .topbar{
      position:sticky; top:12px; z-index:50;
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 14px;
      background: rgba(255,255,255,.70);
      border:1px solid var(--stroke);
      border-radius:var(--r2);
      backdrop-filter: blur(12px);
      box-shadow: var(--shadow);
      gap:12px;
    }
    .brand{display:flex; align-items:center; gap:12px; min-width:0}
    .logo{
      width:76px; height:76px; border-radius:20px; overflow:hidden; flex:0 0 auto;
      background:rgba(255,255,255,.55);
      border:1px solid var(--gold1);
      box-shadow: 0 14px 30px rgba(30,15,10,.14), 0 0 0 6px var(--gold2);
    }
    .logo img{width:100%; height:100%; object-fit:cover}
    .brandText h1{margin:0; font-size:18px; letter-spacing:.3px}
    .brandText small{display:block; color:var(--muted); margin-top:3px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}

    .actions{display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end}

    .btn{
      border:1px solid var(--stroke2);
      background:linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.55));
      color:var(--text);
      padding:10px 12px;
      border-radius:14px;
      cursor:pointer;
      font-weight:900;
      text-decoration:none;
      display:inline-flex; align-items:center; gap:8px;
      transition: transform .06s ease, box-shadow .2s ease;
      user-select:none;
      box-shadow: 0 10px 24px rgba(30,15,10,.08);
    }
    .btn:active{transform:scale(.98)}
    .btn.primary{
      border-color: var(--gold1);
      background:linear-gradient(180deg, rgba(215,180,106,.30), rgba(215,180,106,.12));
      box-shadow: 0 12px 26px rgba(122,77,42,.14);
    }
    .btn.ghost{
      background:transparent;
      border-color: var(--stroke);
      box-shadow:none;
    }

    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.60);
      color:var(--muted);
      font-size:12px;
      white-space:nowrap;
      box-shadow: 0 10px 22px rgba(30,15,10,.06);
    }

    .hero{
      margin-top:16px;
      padding:18px;
      border-radius:var(--r2);
      border:1px solid var(--stroke);
      background:linear-gradient(180deg, rgba(255,255,255,.78), rgba(255,255,255,.62));
      box-shadow: var(--shadow);
      display:grid;
      gap:14px;
    }
    .hero h2{margin:0; font-size:22px; letter-spacing:.2px}
    .hero p{margin:0; color:var(--muted); line-height:1.45}
    .heroRow{display:flex; gap:10px; flex-wrap:wrap; align-items:center;}

    /* Carrusel */
    .heroCarousel{
      display:grid;
      grid-template-columns: 44px 1fr 44px;
      gap:10px;
      align-items:center;
      margin-top:10px;
    }
    .hcBtn{
      height:44px;
      border-radius:14px;
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.70);
      color:var(--text);
      font-weight:950;
      cursor:pointer;
    }
    .hcFrame{
      position:relative;
      border-radius:18px;
      overflow:hidden;
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.70);
      height:220px;
    }
    @media(min-width:740px){ .hcFrame{height:280px} }
    .hcFrame img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .hcCaption{
      position:absolute;
      left:10px; bottom:10px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.40);
      background:rgba(255,255,255,.86);
      color:var(--text);
      font-weight:950;
      font-size:12px;
    }

    .grid{display:grid; gap:16px; margin-top:16px}
    @media(min-width:980px){ .grid.cols2{grid-template-columns: 1.1fr .9fr} }

    .card{
      border-radius:var(--r2);
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.74);
      backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
      padding:16px;
    }
    .card h3{margin:0 0 10px 0; font-size:16px}
    .muted{color:var(--muted)}
    .hr{height:1px; background:rgba(40,20,10,.10); margin:14px 0}

    .menuList{display:grid; gap:12px}
    .item{
      display:grid;
      grid-template-columns: 72px 1fr auto;
      gap:12px;
      align-items:center;
      padding:12px;
      border-radius:18px;
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.62);
      box-shadow: 0 10px 22px rgba(30,15,10,.06);
    }
    .thumb{
      width:72px; height:72px; border-radius:18px; overflow:hidden;
      border:1px solid rgba(40,20,10,.10);
      background:rgba(255,255,255,.70);
    }
    .thumb img{width:100%; height:100%; object-fit:cover; display:block}
    .itemTitle{display:flex; align-items:flex-start; justify-content:space-between; gap:10px}
    .itemTitle strong{font-size:14px}
    .desc{color:var(--muted); font-size:12px; line-height:1.35; margin-top:4px}
    .priceTag{font-weight:950; color:var(--accent); font-size:13px; white-space:nowrap}
    .qty input{
      width:84px;
      padding:10px 10px;
      border-radius:14px;
      border:1px solid rgba(40,20,10,.14);
      background:rgba(255,255,255,.70);
      color:var(--text);
      outline:none;
      font-weight:950;
    }

    label{display:block; font-size:12px; color:var(--muted); margin:10px 0 6px}
    input[type="text"], input[type="tel"], select, textarea{
      width:100%;
      padding:11px 12px;
      border-radius:14px;
      border:1px solid rgba(40,20,10,.16);
      background:rgba(255,255,255,.70);
      color:var(--text);
      outline:none;
    }
    textarea{min-height:92px; resize:vertical}
    .row{display:grid; gap:12px}
    @media(min-width:740px){ .row.cols2{grid-template-columns:1fr 1fr} }
    .mini{font-size:12px; color:var(--muted); margin-top:6px}

    #comboBox{display:none}
    #comboFields{display:grid; gap:12px}
    @media(min-width:740px){ #comboFields{grid-template-columns:1fr 1fr} }

    .warn{
      padding:10px 12px;
      border-radius:16px;
      border:1px solid rgba(217,75,75,.25);
      background:rgba(217,75,75,.10);
      color:#7a1f1f;
      font-size:13px;
      line-height:1.35;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"><img src="logo.jpg" alt="DonJu Gourmet"></div>
        <div class="brandText">
          <h1>DonJu Gourmet</h1>
          <small>Un gusto que enamora ¬∑ Cierre 18:00 ¬∑ Entrega al d√≠a siguiente ¬∑ 180 ml</small>
        </div>
      </div>
      <div class="actions">
        <a class="btn ghost" href="https://www.instagram.com/donju_gourmet" target="_blank" rel="noreferrer">Instagram</a>
        <a class="btn primary" href="#pedido">Pedir</a>
      </div>
    </div>

    <section class="hero">
      <h2>Postres artesanales listos para regalar (o darse un gusto)</h2>
      <p>
        Hechos por encargo para asegurar frescura.
        <b>Cierre 18:00</b> ¬∑ <b>Entrega al d√≠a siguiente</b>.
        Pagas por <b>transferencia</b> o <b>efectivo</b>. Delivery <b>a coordinar</b>.
      </p>
      <div class="heroRow">
        <span class="pill">üìç La Florida ¬∑ Macul ¬∑ Pe√±alol√©n ¬∑ Puente Alto ¬∑ La Granja</span>
        <span class="pill">üßÅ Porci√≥n: 180 ml</span>
        <span class="pill">üéÅ Combos: 3 y 5</span>
      </div>

      <!-- Carrusel -->
      <div class="heroCarousel" aria-label="Galer√≠a de productos">
        <button class="hcBtn" id="hcPrevBtn" type="button">‚Äπ</button>
        <div class="hcFrame">
          <img id="hcImg" src="tiramisu.jpg" alt="Tiramis√∫" loading="eager">
          <div class="hcCaption" id="hcCaption">Tiramis√∫</div>
        </div>
        <button class="hcBtn" id="hcNextBtn" type="button">‚Ä∫</button>
      </div>
    </section>

    <div class="grid cols2">
      <section class="card" id="menu">
        <h3>Men√∫</h3>
        <p class="muted">Elige cantidades. Si compras combo, podr√°s elegir sabores abajo.</p>
        <div class="menuList" id="menuList"></div>

        <div class="hr"></div>

        <div id="comboBox">
          <h3>Sabores del combo</h3>
          <p class="muted" style="margin-top:-6px;">Puedes repetir sabores. Si lo dejas en blanco, lo coordinamos por WhatsApp.</p>
          <div id="comboFields"></div>
        </div>
      </section>

      <section class="card" id="pedido">
        <h3>Datos del pedido</h3>
        <p class="muted">Se abrir√° WhatsApp con el pedido armado.</p>

        <div class="row cols2">
          <div>
            <label>Nombre</label>
            <input id="nombre" type="text" placeholder="Ej: Camila" autocomplete="name" />
          </div>
          <div>
            <label>Tel√©fono (opcional)</label>
            <input id="telefono" type="tel" placeholder="Ej: +56 9 1234 5678" autocomplete="tel" />
          </div>
        </div>

        <div class="row cols2">
          <div>
            <label>Comuna</label>
            <select id="comuna">
              <option>La Florida</option>
              <option>Macul</option>
              <option>Pe√±alol√©n</option>
              <option>Puente Alto</option>
              <option>La Granja</option>
            </select>
          </div>
          <div>
            <label>M√©todo de entrega</label>
            <select id="entrega">
              <option>Delivery (a coordinar)</option>
              <option>Retiro (a coordinar)</option>
            </select>
            <div class="mini" id="entregaHint"></div>
          </div>
        </div>

        <div class="row cols2">
          <div>
            <label>D√≠a de entrega</label>
            <input id="dia" type="text" placeholder="Ej: Ma√±ana / 24-02" />
          </div>
          <div>
            <label>Horario estimado</label>
            <input id="horario" type="text" placeholder="Ej: 18:30" />
          </div>
        </div>

        <div id="addressBlock">
          <label>Direcci√≥n (si es delivery)</label>
          <input id="direccion" type="text" placeholder="Calle + n√∫mero + depto/casa" autocomplete="street-address" />
        </div>

        <label>Notas</label>
        <textarea id="notas" placeholder="Alergias / dedicatoria / detalles del combo"></textarea>

        <div class="row cols2" style="align-items:end">
          <div>
            <label>M√©todo de pago</label>
            <select id="pago">
              <option>Transferencia</option>
              <option>Efectivo</option>
            </select>
            <div style="height:10px"></div>
            <div class="warn" id="warnBox" style="display:none"></div>
          </div>
          <div style="display:flex; gap:10px; justify-content:flex-end; flex-wrap:wrap">
            <button class="btn ghost" id="btnClear" type="button">Limpiar</button>
            <button class="btn primary" id="btnSend" type="button">Enviar por WhatsApp</button>
          </div>
        </div>
      </section>
    </div>

    <footer style="padding:26px 0; color:var(--muted); font-size:12px">
      ¬© <span id="year"></span> DonJu Gourmet ¬∑ Instagram:
      <a href="https://www.instagram.com/donju_gourmet" target="_blank" rel="noreferrer">@donju_gourmet</a>
      ¬∑ WhatsApp: +56 9 5605 9401
    </footer>
  </div>

  <script>
    // ====== UTIL ======
    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }
    function money(n){ return `$${Number(n||0).toLocaleString("es-CL")}`; }

    // ====== DATA ======
    const WHATSAPP_NUMBER = "56956059401";
    const PRODUCTS = [
      { id:"p1", name:"Tiramis√∫", desc:"Cremoso, con caf√© y cacao.", price:2000, type:"single", img:"tiramisu.jpg" },
      { id:"p2", name:"Cheesecake de maracuy√°", desc:"Dulce y √°cido balanceado.", price:2000, type:"single", img:"cheesecake-maracuya.jpg" },
      { id:"p3", name:"Suspiro Lime√±o", desc:"Manjar + merengue delicado.", price:2000, type:"single", img:"suspiro-limeno.jpg" },
      { id:"p4", name:"Mousse de manjar", desc:"Textura ligera y sedosa.", price:2000, type:"single", img:"mousse-manjar.jpg" },
      { id:"p5", name:"Carlota de mango", desc:"Cremoso y refrescante.", price:2000, type:"single", img:"carlota-mango.jpg" },
      { id:"c3", name:"Combo 3 (a elecci√≥n)", desc:"3 x 180 ml.", price:5500, type:"combo", picks:3, img:"combo3.jpg" },
      { id:"c5", name:"Combo 5 (a elecci√≥n)", desc:"5 x 180 ml.", price:9000, type:"combo", picks:5, img:"combo5.jpg" }
    ];
    const SINGLES = PRODUCTS.filter(p => p.type === "single");
    const COMBOS = PRODUCTS.filter(p => p.type === "combo");

    // ====== YEAR ======
    document.getElementById("year").textContent = new Date().getFullYear();

    // ====== RENDER MENU ======
    const menuList = document.getElementById("menuList");
    PRODUCTS.forEach(p=>{
      const row = document.createElement("div");
      row.className = "item";
      row.innerHTML = `
        <div class="thumb"><img src="${escapeHtml(p.img)}" alt="${escapeHtml(p.name)}" loading="lazy"></div>
        <div>
          <div class="itemTitle">
            <strong>${escapeHtml(p.name)}</strong>
            <span class="priceTag">${money(p.price)}</span>
          </div>
          <div class="desc">${escapeHtml(p.desc)}</div>
        </div>
        <div class="qty">
          <input id="${p.id}" type="number" min="0" value="0" inputmode="numeric">
        </div>
      `;
      menuList.appendChild(row);
    });

    // ====== COMBOS (selectors) ======
    const comboBox = document.getElementById("comboBox");
    const comboFields = document.getElementById("comboFields");

    function getQty(id){
      return parseInt(document.getElementById(id).value || "0", 10) || 0;
    }

    function updateComboUI(){
      let totalPicks = 0;
      COMBOS.forEach(c => totalPicks += getQty(c.id) * c.picks);

      if(totalPicks <= 0){
        comboBox.style.display = "none";
        comboFields.innerHTML = "";
        return;
      }

      comboBox.style.display = "block";
      comboFields.innerHTML = "";
      for(let i=0;i<totalPicks;i++){
        const wrap = document.createElement("div");
        wrap.innerHTML = `
          <label>Selecci√≥n ${i+1}</label>
          <select id="pick_${i}">
            <option value="">(Elegir sabor)</option>
            ${SINGLES.map(s => `<option value="${escapeHtml(s.name)}">${escapeHtml(s.name)}</option>`).join("")}
          </select>
        `;
        comboFields.appendChild(wrap);
      }
    }

    PRODUCTS.forEach(p=>{
      document.getElementById(p.id).addEventListener("input", updateComboUI);
    });

    function comboSummary(){
      if(comboBox.style.display === "none") return "";
      const picks = Array.from(comboFields.querySelectorAll("select")).map(s=>s.value).filter(Boolean);
      if(!picks.length) return "Sabores combo: (sin seleccionar, a coordinar)";
      const c = {};
      picks.forEach(x=>c[x]=(c[x]||0)+1);
      return "Sabores combo: " + Object.entries(c).map(([n,k])=>`${k} x ${n}`).join(" ¬∑ ");
    }

    // ====== ENTREGA UI ======
    const entregaEl = document.getElementById("entrega");
    const addressBlock = document.getElementById("addressBlock");
    const entregaHint = document.getElementById("entregaHint");
    function updateEntrega(){
      const isDelivery = entregaEl.value.toLowerCase().includes("delivery");
      addressBlock.style.display = isDelivery ? "block" : "none";
      entregaHint.textContent = isDelivery ? "Agrega direcci√≥n para coordinar." : "Coordinamos retiro por WhatsApp.";
    }
    entregaEl.addEventListener("change", updateEntrega);
    updateEntrega();

    // ====== WHATSAPP ======
    function buildOrderLines(){
      const lines = [];
      let total = 0;
      PRODUCTS.forEach(p=>{
        const q = getQty(p.id);
        if(q>0){
          const sub = q * p.price;
          total += sub;
          lines.push(`- ${p.name} x${q} = ${money(sub)}`);
        }
      });
      return { lines, total };
    }

    document.getElementById("btnClear").addEventListener("click", ()=>{
      PRODUCTS.forEach(p=>document.getElementById(p.id).value = 0);
      comboFields.innerHTML = "";
      comboBox.style.display = "none";
      ["nombre","telefono","dia","horario","direccion","notas"].forEach(id=>document.getElementById(id).value="");
      document.getElementById("warnBox").style.display="none";
      updateEntrega();
    });

    document.getElementById("btnSend").addEventListener("click", ()=>{
      const warnBox = document.getElementById("warnBox");
      warnBox.style.display="none";
      warnBox.textContent="";

      const { lines, total } = buildOrderLines();
      if(!lines.length){
        warnBox.style.display="block";
        warnBox.textContent="Te falta elegir al menos 1 √≠tem.";
        return;
      }

      const nombre = document.getElementById("nombre").value.trim() || "(sin nombre)";
      const telefono = document.getElementById("telefono").value.trim();
      const comuna = document.getElementById("comuna").value;
      const entrega = document.getElementById("entrega").value;
      const dia = document.getElementById("dia").value.trim() || "(sin fecha)";
      const horario = document.getElementById("horario").value.trim() || "(sin horario)";
      const direccion = document.getElementById("direccion").value.trim();
      const notas = document.getElementById("notas").value.trim();
      const pago = document.getElementById("pago").value;

      const isDelivery = entrega.toLowerCase().includes("delivery");
      if(isDelivery && !direccion){
        warnBox.style.display="block";
        warnBox.textContent="Si es delivery, agrega direcci√≥n.";
        return;
      }

      const comboUsed = (getQty("c3")>0 || getQty("c5")>0);
      const comboText = comboUsed ? `\nüéÅ ${comboSummary()}\n` : "";

      const msg =
`Hola DonJu Gourmet üëã
Soy: ${nombre}${telefono ? ` (Tel: ${telefono})` : ""}

üßÅ Pedido (180 ml):
${lines.join("\n")}
Total: ${money(total)}
${comboText}
üìç Comuna: ${comuna}
üöö Entrega: ${entrega} (a coordinar)
üìÖ D√≠a: ${dia}
üïí Hora: ${horario}
${isDelivery ? `üè† Direcci√≥n: ${direccion}\n` : ""}üí≥ Pago: ${pago}
${notas ? `üìù Notas: ${notas}\n` : ""}

(Cierre 18:00 ¬∑ Entrega al d√≠a siguiente ‚úÖ)`;

      window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`, "_blank");
    });

    // ====== CARRUSEL (FUNCIONA S√ç O S√ç) ======
    const HERO_SLIDES = [
      { src: "tiramisu.jpg", label: "Tiramis√∫" },
      { src: "cheesecake-maracuya.jpg", label: "Cheesecake de maracuy√°" },
      { src: "suspiro-limeno.jpg", label: "Suspiro Lime√±o" },
      { src: "mousse-manjar.jpg", label: "Mousse de manjar" },
      { src: "carlota-mango.jpg", label: "Carlota de mango" },
      { src: "combo3.jpg", label: "Combo 3" },
      { src: "combo5.jpg", label: "Combo 5" }
    ];

    let hcIndex = 0;
    let hcTimer = null;

    function hcRender(){
      const img = document.getElementById("hcImg");
      const cap = document.getElementById("hcCaption");
      if(!img || !cap) return;
      img.src = HERO_SLIDES[hcIndex].src;
      img.alt = HERO_SLIDES[hcIndex].label;
      cap.textContent = HERO_SLIDES[hcIndex].label;
    }

    function hcPrev(){
      hcIndex = (hcIndex - 1 + HERO_SLIDES.length) % HERO_SLIDES.length;
      hcRender();
      hcStart();
    }
    function hcNext(){
      hcIndex = (hcIndex + 1) % HERO_SLIDES.length;
      hcRender();
      hcStart();
    }
    function hcStart(){
      if(hcTimer) clearInterval(hcTimer);
      hcTimer = setInterval(hcNext, 3500);
    }

    document.getElementById("hcPrevBtn").addEventListener("click", hcPrev);
    document.getElementById("hcNextBtn").addEventListener("click", hcNext);

    hcRender();
    hcStart();
  </script>
</body>
</html>
